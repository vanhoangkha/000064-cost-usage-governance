[
{
	"uri": "/",
	"title": "Cost Management and Resource Usage",
	"tags": [],
	"description": "",
	"content": "Resource Usage and Cost Management with IAM on AWS Overview In this lab, we will use IAM (Identity and Access Management) service to implement some best practices about cost management and resource usage on AWS environment.\nAWS IAM Content Preparation Limit by Region Limit by EC2 family Limit by instance size Limit by EBS volume type Resource Cleanup "
},
{
	"uri": "/1-preparation/1.1-creategroup/",
	"title": "Create IAM Group",
	"tags": [],
	"description": "",
	"content": "Create IAM group Go to IAM service management console In the left menu, click User groups. At the User groups page. Click Create group. At the Create user group page. Set User group name as CostTest. Scroll to the bottom of the page and click Create group. We will see CostTest user group created successfully as shown below. In the next step, we will create IAM user testuser and is a member of the CostTest group.\n"
},
{
	"uri": "/2-limit-region/2.1-createpolicy/",
	"title": "Create restriction policy",
	"tags": [],
	"description": "",
	"content": "Create policy to limit resource usage by Region After creating user successfully. In the left hand menu, click Policies. At the Policies page. Click Create Policy. At the Create policy page. Click tab JSON. Copy and Paste the policy content below. {\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: [\r\u0026#34;ec2:*\u0026#34;,\r\u0026#34;rds:*\u0026#34;,\r\u0026#34;s3:*\u0026#34;\r],\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Condition\u0026#34;: {\u0026#34;StringEquals\u0026#34;: {\u0026#34;aws:RequestedRegion\u0026#34;: \u0026#34;ap-southeast-1\u0026#34;}}\r}\r]\r} You can change the Region information in the above policy to suit the Region to which you want to authorize EC2, RDS and S3 services.\nClick Next: Tags. Click Next: Review. At Review policy page. Set Name as RegionRestrict. Set Description* to EC2, RDS, S3 access in a single Region only. Click Create policy. Make sure the RegionRestrict policy is created successfully. In the next step, we will assign the policy to the CostTest group and then test the effectiveness of this policy.\n"
},
{
	"uri": "/3-limit-family/3.1-createpolicy/",
	"title": "Create restriction policy",
	"tags": [],
	"description": "",
	"content": "Create a policy to limit resource usage according to the EC2 family Sign out and log in again with an IAM user with admin rights.\nGo to IAM service administration interface\nClick Policies. Click Create Policy. At the Create policy page. Click JSON tab. Copy the policy below. {\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: \u0026#34;ec2:*\u0026#34;,\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Condition\u0026#34;: {\r\u0026#34;ForAllValues:StringLike\u0026#34;: {\r\u0026#34;ec2:InstanceType\u0026#34;: [\r\u0026#34;t3.*\u0026#34;\r]\r}\r}\r}\r]\r} + Click **Next: Tags**.\rClick Next: Review. At Name enter EC2_FamilyRestrict. At Description enter Restrict to t3 families. Click Create policy. In the next step, we will assign the policy to the CostTest group and then test the effectiveness of this policy.\n"
},
{
	"uri": "/5-limit-vol/5.1-createpolicy/",
	"title": "Create restriction policy",
	"tags": [],
	"description": "",
	"content": "Create policy to limit resource usage according to EBS volume type Signout and login again with IAM user with admin rights.\nGo to IAM service management console\nClick Policies. Click Create Policy. At the Create policy page. Click JSON tab. Copy the policy below. {\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Sid\u0026#34;: \u0026#34;VisualEditor0\u0026#34;,\r\u0026#34;Effect\u0026#34;: \u0026#34;Deny\u0026#34;,\r\u0026#34;Action\u0026#34;: \u0026#34;ec2:*\u0026#34;,\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Condition\u0026#34;: {\r\u0026#34;StringEquals\u0026#34;: {\r\u0026#34;ec2:VolumeType\u0026#34;: \u0026#34;io1\u0026#34;\r}\r}\r}\r]\r} + Click **Next: Tags**.\rClick Next: Review. At Name enter EC2_FamilyRestrict. At Description enter Dont allow EBS io1 volumes. Click Create policy. In the next step, we will assign the policy to the CostTest group and then test the effectiveness of this policy.\n"
},
{
	"uri": "/1-preparation/",
	"title": "Preparation",
	"tags": [],
	"description": "",
	"content": "Prepare To prepare for this lab, we will proceed to create an IAM group and create a user named testuser to check the validity of the assigned policies.\nContent Create IAM group Create test user "
},
{
	"uri": "/4-limit-size/4.1-createpolicy/",
	"title": "Update restriction policy",
	"tags": [],
	"description": "",
	"content": "Update policy to limit resource usage according to EC2 instance size Sign out and log in again with an IAM user with admin rights.\nGo to IAM service administration interface\nClick Policies. In the search box, enter EC2_FamilyRestrict. Press the Enter key. Click policy EC2_FamilyRestrict. Click Edit policy. Copy the policy below instead. {\r\u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;,\r\u0026#34;Statement\u0026#34;: [\r{\r\u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;,\r\u0026#34;Action\u0026#34;: \u0026#34;ec2:*\u0026#34;,\r\u0026#34;Resource\u0026#34;: \u0026#34;*\u0026#34;,\r\u0026#34;Condition\u0026#34;: {\r\u0026#34;ForAllValues:StringLike\u0026#34;: {\r\u0026#34;ec2:InstanceType\u0026#34;: [\r\u0026#34;t3.nano\u0026#34;\r]\r}\r}\r}\r]\r} Click Review policy. Click Save changes. In this step, we have specified that we can only create instances with family and size as t3.nano. In the next step, we will test the effectiveness of this policy.\n"
},
{
	"uri": "/2-limit-region/2.2-attachpolicy/",
	"title": "Assign policy to group",
	"tags": [],
	"description": "",
	"content": "Assign policy to group CostTest After creating the policy successfully. In the left-hand menu, click User groups. Click on the CostTest group. On the group page CostTest. Click the Permissions tab. Click Add permissions. Click Attach policies. In the Filter box, click Type. Click Type: Customer managed. Customer managed are the IAM Policies we create and manage ourselves.\nClick the Filter box, and enter the name of the policy we created in the previous step ( RegionRestrict ). Press the Enter key. Click the checkbox next to RegionRestrict policy. Click Add permissions. Make sure the policy is successfully assigned. In the next step, we will log in with the user testuser to check the permissions on the Region that we have assigned.\n"
},
{
	"uri": "/3-limit-family/3.2-attachpolicy/",
	"title": "Assign policy to group",
	"tags": [],
	"description": "",
	"content": "Assign policy to group CostTest After creating the policy successfully. In the left-hand menu, click User groups. Click on CostTest group. On the group page CostTest.\nClick the Permissions tab. Click Add permissions. Click Attach policies. In the Filter box, click Type.\nClick Type: Customer managed. Customer managed are the IAM Policies we create and manage ourselves.\nClick the Filter box, enter the name of the policy we created in the previous step ( EC2_FamilyRestrict ).\nPress the Enter key. Click the checkbox next to EC2_FamilyRestrict policy.\nClick Add permissions. Make sure the policy is successfully assigned. Click RegionRestrict policy. Click Remove. We need to remove the RegionRestrict policy because this policy provides full permissions on the EC2 service.\nNext step, we will log in with user testuser to check if we can create an EC2 server with a family other than T3.\n"
},
{
	"uri": "/5-limit-vol/5.2-attachpolicy/",
	"title": "Assign policy to group",
	"tags": [],
	"description": "",
	"content": "Assign policy to group CostTest After creating the policy successfully. In the left-hand menu, click User groups. Click on CostTest group. On the group page CostTest.\nClick the Permissions tab. Click Add permissions. Click Attach policies. In the Filter box, click Type.\nClick Type: Customer managed. Customer managed are the IAM Policies we create and manage ourselves.\nClick the Filter box, and enter the name of the policy we created in the previous step ( EC2EBS_Restrict ).\nPress the Enter key. Click the checkbox next to EC2EBS_Restrict policy.\nClick Add permissions. Make sure the policy is successfully assigned. Next step, we will log in as user testuser to check if we can create an EC2 server with an EBS volume with type io1.\n"
},
{
	"uri": "/1-preparation/1.2-createuser/",
	"title": "Create IAM user",
	"tags": [],
	"description": "",
	"content": "Create IAM group After creating the group successfully, at the menu on the left-hand side. Click Users. At the Users page. Click Add users. At the Add user page. Set User name as testuser. Click Password - AWS Management Console access to let the user login to the management console. Click Custom password to set a custom password. Set password as Testuser123. Uncheck User must create a new password at next sign-in. Click Next:Permissions. Click CostTest group, then click Next: Tags. Click Next: Review. Check the information, click Create user. Make sure the user created successfully. Click Close. We have finished preparing the IAM user and group. Next, we will proceed to decentralize to limit resource usage by Region.\n"
},
{
	"uri": "/2-limit-region/",
	"title": "Limit by Region",
	"tags": [],
	"description": "",
	"content": "Create a policy to limit service usage by Region To manage costs, you need to manage and control your usage. AWS provides multiple Regions, so depend on your requirements, you can limit access to AWS services depending on the Region.\nThis can be used to ensure that usage is only allowed in specific areas more cost-effectively and to reduce usage and associated costs, such as data transmission costs.\nWe will create a policy that allows all EC2, RDS, and S3 access in only a single Region.\nIt is best practice to provide only the minimum necessary access, the policy used here is short and simple and should only be used for the lab before being deleted.\nContent Create restriction policy Assign policy to group Validate policy effectiveness "
},
{
	"uri": "/4-limit-size/4.2-testpolicy/",
	"title": "Validate policy effectiveness",
	"tags": [],
	"description": "",
	"content": "Validate the effectiveness of the policy by creating another EC2 instance t3.nano Click on the name of the currently logged-in user.\nClick Sign out. Click Log back in\nAt IAM user name enter the user we created (testuser). At Password enter the password we have set up (Testuser123). Click Sign in. If you failed to log in, please check the user and password information created in the previous steps. Also, make sure you use the correct AWS account ID when logging in.\nClick the search box, and click EC2 to go to the management interface of the EC2 service.\nClick Launch instance, then click Launch instance.\nAt Name enter testserver At Key pair name, click in Select box. Select **Proceed without a key pair (Not recommended) We will need key pair to be able to make a connection to the EC2 instance. In this lab, we just want to check the service permissions so we won\u0026rsquo;t need to connect to the EC2 instance.\nScroll down, and click on instance type t2.micro. In the search box, enter t3. Click to select instance type t3.micro. Check Instance type has changed to t3.micro. Click Launch instance. In this step, we tried to create 1 EC2 instance with instance type t3.micro and this EC2 instance creation failed because we only have permission to create instances that belong to the T3 family and have nano size. ( t3.nano )\nTry creating a server with T3 family and size nano (t3.nano) Click Edit instance config. Scroll down, click on instance type t3.micro.\nIn the search box, enter t3.\nClick to select instance type t3.nano. Check Instance type has changed to t3.nano. Click Launch instance. 5. So we have successfully created EC2 instance with instance type t3.nano.\nDelete the created testserver Click View all instances. At the list of EC2 instances.\nClick to select testserver. Click Instance state.\nClick Terminate instance to proceed to delete the virtual server testserver. Click Terminate to confirm. Make sure you delete the instance successfully, avoiding unexpected costs.\nIn this step, we have successfully created an EC2 instance with instance type t3.nano. In the next section, we will try to limit the creation of an instance with an EBS volume type of io1.\n"
},
{
	"uri": "/3-limit-family/",
	"title": "Limit by EC2 family",
	"tags": [],
	"description": "",
	"content": "Create a policy to limit service usage according to EC2 family Amazon Elastic Compute Cloud (EC2) virtual server service provides us with many different configuration options according to family and instance size. In this section, we will proceed to create a policy that only allows the creation and use of EC2 instances with a T-series family.\nContent Create restriction policy Assign policy to group Check policy effectiveness "
},
{
	"uri": "/2-limit-region/2.3-testpolicy/_index./",
	"title": "Validate policy effectiveness",
	"tags": [],
	"description": "",
	"content": "Validate the effectiveness of the policy by creating an EC2 instance in the allowed Region Click on the name of the currently logged-in user. Click Sign out. Click Log back in At IAM user name enter the user we created (testuser). At Password enter the password we have set up (Testuser123). Click Sign in. If you failed to log in, please check the user and password information created in the previous steps. Also, make sure you use the correct AWS account ID when logging in.\nClick Switch to the new Console Home to switch to the new interface. Click on the Region menu next to the login user name. Click on the Region where we have allowed testuser operations in the RegionRestrict policy. You have just performed the Region conversion. After converting Region, the resources you create will be in the Region you are using.\nClick the search box, and click EC2 to go to the management interface of the EC2 service. Click Launch instance, then click Launch instance. At Name enter testserver At Key pair name, click in the Select box. Select **Proceed without a key pair (Not recommended) We will need key pair to be able to make a connection to the EC2 instance. In this lab, we just want to check the service permissions so we won\u0026rsquo;t need to connect to the EC2 instance.\nClick Launch Instance. In this step, we have successfully created 1 EC2 instance with instance type t2.micro in Region Singapore. Next, we try to switch to another Region to check if we have permission to create a server in another Region or not.\nTry creating a server in another Region Click on the Region menu next to the login user name. Click on the Region different from the Region that we have allowed the testuser\u0026rsquo;s operation in the RegionRestrict policy. Try setting Key pair or instance type. You will see that you do not have permission to create EC2 instances on this Region. Return to the original Region before performing the next step. Delete the created testserver Check you are in the correct Region initially. Click Instances. At the list of EC2 instances. Click to select testserver. Click Instance state. Click Terminate instance to proceed to delete the virtual server testserver. Click Terminate to confirm. Make sure you delete the instance successfully, avoiding unexpected costs. In this step, we have successfully created 1 EC2 instance with instance type t2.micro in Region Singapore. In the next section we will try to limit the creation of a specific instance\n"
},
{
	"uri": "/5-limit-vol/5.3-testpolicy/",
	"title": "Validate policy effectiveness",
	"tags": [],
	"description": "",
	"content": "Validate the effectiveness of the policy by creating an EC2 instance with a volume type of io1 Click on the name of the currently logged-in user.\nClick Sign out. Click Log back in\nAt IAM user name enter the user we created (testuser). At Password enter the password we have set up (Testuser123). Click Sign in. If you failed to log in, please check the user and password information created in the previous steps. Also, make sure you use the correct AWS account ID when logging in.\nClick the search box, and click EC2 to go to the management interface of the EC2 service.\nClick Launch instance, then click Launch instance.\nAt Name enter testserver Scroll down, click on instance type t2.micro. In the search box, enter t3. Click to select instance type t3.nano. At Key pair name, click in the Select box. Select **Proceed without a key pair (Not recommended) We will need key pair to be able to make a connection to the EC2 instance. In this lab, we just want to check the service permissions so we won\u0026rsquo;t need to connect to the EC2 instance.\nScroll down to Configure storage. Click Add new volume. Click gp3. Click Provisioned IOPS SSD (io1) to change the volume type to io1. Click Launch instance. We will see that launching an instance with volume type io1 will fail. Try creating a server with volume type gp3 Click Edit instance config. Scroll down, click io1. Click General purpose SSD(gp3) to convert the volume type to gp3. Click Launch instance. So we have successfully created EC2 instance with instance type t3.nano and volume type gp3. Delete the created testserver Click View all instances. At the list of EC2 instances.\nClick to select testserver. Click Instance state.\nClick Terminate instance to proceed to delete the virtual server testserver. Click Terminate to confirm. Make sure you delete the instance successfully, avoiding unexpected costs.\nIn this step, we have successfully created 1 EC2 instance with instance type of t3.nano and volume type of gp3 (forbid users from creating volume type of io1). The next step is to clean up resources.\n"
},
{
	"uri": "/3-limit-family/3.3-testpolicy/",
	"title": "Validate policy effectiveness ",
	"tags": [],
	"description": "",
	"content": "Validate the effectiveness of the policy by creating an EC2 instance other than the T3 family. Click on the name of the currently logged-in user.\nClick Sign out. Click Log back in\nAt IAM user name enter the user we created (testuser). At Password enter the password we have set up (Testuser123). Click Sign in. If you failed to log in, please check the user and password information created in the previous steps. Also, make sure you use the correct AWS account ID when logging in.\nClick the search box, click EC2 to go to the management interface of the EC2 service.\nClick Launch instance, then click Launch instance.\nAt Name enter testserver At Key pair name, click in Select box. Select **Proceed without a key pair (Not recommended) We will need key pair to be able to make a connection to the EC2 instance. In this lab, we just want to check the service permissions so we won\u0026rsquo;t need to connect to the EC2 instance.\nClick Launch Instance. In this step, we tried to create 1 EC2 instance with instance type of t2.micro and this EC2 instance creation failed because we only have permission to create instances belonging to T3 family.\nTry creating a server with T3 family Click Edit instance config. Scroll down, and click on instance type t2.micro. In the search box, enter t3. Click to select instance type t3.micro. Check Instance type has changed to t3.micro. Click Launch instance. So we have successfully created EC2 instance with instance type t3.micro. Delete the created testserver Click View all instances. At the list of EC2 instances.\nClick to select testserver. Click Instance state.\nClick Terminate instance to proceed to delete the virtual server testserver. Click Terminate to confirm. Make sure you delete the instance successfully, avoiding unexpected costs.\nIn this step, we have successfully created an EC2 instance with instance type t3.micro. In the next section, we will try to limit the creation of an instance with a specified size.\n"
},
{
	"uri": "/4-limit-size/",
	"title": "Limit by instance size",
	"tags": [],
	"description": "",
	"content": "Create a policy ( policy ) that limits service usage by EC2 instance size. Amazon Elastic Compute Cloud (EC2) virtual server service provides us with many different configuration options according to family and instance size. In this section we will proceed to create a policy that only allows the creation and use of EC2 instances with a T series family and an instance size of t3.nano.\nContent Create restriction policy Validate policy effectiveness "
},
{
	"uri": "/5-limit-vol/",
	"title": "Limited by EBS volume",
	"tags": [],
	"description": "",
	"content": "Create a limit policy ( policy ) according to EBS volume type. Elastic Block Store (EBS) is a service that provides storage infrastructure for EC2. We can choose from many different types of storage depending on the purpose of use. Managing the type of usable storage is also important in managing costs. In this step we will create an IAM policy that does not allow the use of the Provision IOPS (io1) volume type. Provision IOPS (io1) is a volume class that provides high performance and is intended for mission-critical applications.\nContent Create restriction policy Assign policy to group Check policy effectiveness "
},
{
	"uri": "/6-cleanup/",
	"title": "Clean up resources",
	"tags": [],
	"description": "",
	"content": "We will proceed to delete the resources in the following order\nDelete IAM Policy RegionRestrict Sign out and log back in with a user with admin rights.\nGo to IAM service administration interface\nClick Policies. In the search box, enter RegionRestrict.\nPress Enter. Click the RegionRestrict policy.\nClick Actions. Click Delete. Enter RegionRestrict to confirm policy deletion. Click Delete. Delete IAM Policy EC2EBS_Restrict Click the X icon to clear the Filter.\nIn the search box, enter EC2EBS_Restrict\nPress Enter. Click the policy EC2EBS_Restrict\nClick Actions. Click Delete. Enter EC2EBS_Restrict to confirm policy deletion.\nClick Delete. Delete IAM Policy EC2_FamilyRestrict Click the X icon to clear the Filter.\nIn the search box, enter EC2_FamilyRestrict\nPress Enter. Click the policy EC2_FamilyRestrict\nClick Actions. Click Delete. Enter EC2_FamilyRestrict to confirm policy deletion.\nClick Delete. Delete IAM user testuser Click Users. Click to select testuser. Click Delete. Enter testuser to confirm. Click Delete. Delete IAM group CostTest Click User groups. Click on CostTest group. Click Delete. Enter CostTest to confirm. Click Delete. "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]